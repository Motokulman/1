$("#test_buttons button").click(function () { calc() }); function calc() { var a = { living: 0, uninhabited: 0 }, b = { living: 0, uninhabited: 0 }, c = 0; for (element of elements.values()) { var d = 0, e = 0; for (item of element.ids.values()) { var f = lines.find(a => a.id == item), g = points.find(a => a.id == f.id0), h = points.find(a => a.id == f.id1), i = lengthLine(g, h); 0 < element.distance && 1 == element.ids.length && (i = 3.14 * i / 2), "partition" == element.bearType ? d = i : "bearing" == element.bearType && (e = i, "outdoor" == element.outdoorType && (c += i)), "living" == element.liveType ? (a.living += d, b.living += e) : "uninhabited" == element.liveType && (a.uninhabited += d, b.uninhabited += e) } 0 == d + e && console.log("\u041D\u0435 \u0437\u0430\u0434\u0430\u043D \u0442\u0438\u043F \u0441\u0442\u0435\u043D\u044B \u043F\u043E \u043D\u0430\u0433\u0440\u0443\u0437\u043A\u0435: ", element) } console.log("partition.living = ", a.living), console.log("partition.uninhabited = ", a.uninhabited), console.log("bearing.living = ", b.living), console.log("bearing.uninhabited = ", b.uninhabited), console.log("fasade = ", c) }